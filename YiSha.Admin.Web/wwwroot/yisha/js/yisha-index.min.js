function NavToggle(){$(".navbar-minimalize").trigger("click")}function SmoothlyMenu(){$("body").hasClass("mini-navbar")?$("body").hasClass("fixed-sidebar")?($("#side-menu").hide(),setTimeout(function(){$("#side-menu").fadeIn(500)},300)):$("#side-menu").removeAttr("style"):($("#side-menu").hide(),setTimeout(function(){$("#side-menu").fadeIn(500)},100))}$(function(){$("#side-menu").metisMenu();$(function(){$(".sidebar-collapse").slimScroll({height:"100%",railOpacity:.9,size:"4px"})});$(".navbar-minimalize").click(function(){$("body").toggleClass("mini-navbar");SmoothlyMenu()});$("#side-menu>li").click(function(){$("body").hasClass("mini-navbar")&&NavToggle()});$("#side-menu>li li a").click(function(){$(window).width()<769&&NavToggle()});$(".nav-close").click(NavToggle);/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)&&$("#content-main").css("overflow-y","auto")});$(window).bind("load resize",function(){$(this).width()<769&&($("body").addClass("mini-navbar"),$(".navbar-static-side").fadeIn())});$(function(){function n(n){var t=0;return $(n).each(function(){t+=$(this).outerWidth(!0)}),t}function t(t){var f=n($(t).prevAll()),e=n($(t).nextAll()),o=n($(".content-tabs").children().not(".menuTabs")),r=$(".content-tabs").outerWidth(!0)-o,i=0,u;if($(".page-tabs-content").outerWidth()<r)i=0;else if(e<=r-$(t).outerWidth(!0)-$(t).next().outerWidth(!0)){if(r-$(t).next().outerWidth(!0)>e)for(i=f,u=t;i-$(u).outerWidth()>$(".page-tabs-content").outerWidth()-r;)i-=$(u).prev().outerWidth(),u=$(u).prev()}else f>r-$(t).outerWidth(!0)-$(t).prev().outerWidth(!0)&&(i=f-$(t).prev().outerWidth(!0));$(".page-tabs-content").animate({marginLeft:0-i+"px"},"fast")}function i(n){var t=$(n).data("id");$(".nav ul, .nav li").removeClass("selected").removeClass("active").removeClass("in");$(".nav ul, .nav li").each(function(){var i,o,n,u,f,e,r,s;if($(this).children().length>0&&(i=$(this).children()[0],i&&(o=$(i).data("url"),o==t)))return n="[data-type=menu]",u=$(i).parent(n),u.addClass("active"),f=u.parent(n),f.addClass("in").addClass("active"),e=f.parent(n),e.addClass("active"),r=e.parent(n),r&&(r.addClass("in").addClass("active"),s=r.parent(n),s.addClass("active")),!1})}function u(){var f=Math.abs(parseInt($(".page-tabs-content").css("margin-left"))),e=n($(".content-tabs").children().not(".menuTabs")),r=$(".content-tabs").outerWidth(!0)-e,u=0,t,i;if($(".page-tabs-content").width()<r)return!1;for(t=$(".menuTab:first"),i=0;i+$(t).outerWidth(!0)<=f;)i+=$(t).outerWidth(!0),t=$(t).next();if(i=0,n($(t).prevAll())>r){while(i+$(t).outerWidth(!0)<r&&t.length>0)i+=$(t).outerWidth(!0),t=$(t).prev();u=n($(t).prevAll())}$(".page-tabs-content").animate({marginLeft:0-u+"px"},"fast")}function f(){var f=Math.abs(parseInt($(".page-tabs-content").css("margin-left"))),e=n($(".content-tabs").children().not(".menuTabs")),u=$(".content-tabs").outerWidth(!0)-e,r=0,t,i;if($(".page-tabs-content").width()<u)return!1;for(t=$(".menuTab:first"),i=0;i+$(t).outerWidth(!0)<=f;)i+=$(t).outerWidth(!0),t=$(t).next();for(i=0;i+$(t).outerWidth(!0)<u&&t.length>0;)i+=$(t).outerWidth(!0),t=$(t).next();r=n($(t).prevAll());r>0&&$(".page-tabs-content").animate({marginLeft:0-r+"px"},"fast")}function e(){var i=$(this).parents(".menuTab").data("id"),u=$(this).parents(".menuTab").width(),r,n;return $(this).parents(".menuTab").hasClass("active")?($(this).parents(".menuTab").next(".menuTab").size()&&(n=$(this).parents(".menuTab").next(".menuTab:eq(0)").data("id"),$(this).parents(".menuTab").next(".menuTab:eq(0)").addClass("active"),$(".mainContent .YiSha_iframe").each(function(){if($(this).data("id")==n)return $(this).show().siblings(".YiSha_iframe").hide(),!1}),r=parseInt($(".page-tabs-content").css("margin-left")),r<0&&$(".page-tabs-content").animate({marginLeft:r+u+"px"},"fast"),$(this).parents(".menuTab").remove(),$(".mainContent .YiSha_iframe").each(function(){if($(this).data("id")==i)return $(this).remove(),!1})),$(this).parents(".menuTab").prev(".menuTab").size()&&(n=$(this).parents(".menuTab").prev(".menuTab:last").data("id"),$(this).parents(".menuTab").prev(".menuTab:last").addClass("active"),$(".mainContent .YiSha_iframe").each(function(){if($(this).data("id")==n)return $(this).show().siblings(".YiSha_iframe").hide(),!1}),$(this).parents(".menuTab").remove(),$(".mainContent .YiSha_iframe").each(function(){if($(this).data("id")==i)return $(this).remove(),!1}))):($(this).parents(".menuTab").remove(),$(".mainContent .YiSha_iframe").each(function(){if($(this).data("id")==i)return $(this).remove(),!1}),t($(".menuTab.active"))),!1}function r(){var t=$(".page-tabs-content").find(".active").attr("data-id"),n=$('.YiSha_iframe[data-id="'+t+'"]'),i=n.attr("src");n.attr("src",i).ready()}$(".menuItem").each(function(n){$(this).attr("data-index")||$(this).attr("data-index",n)});$(".menuItem").on("click",function(){var n=$(this).data("url"),o=$(this).data("index"),s=$.trim($(this).text()),r=$(this).attr("href"),u=!0,f,e;return r!=="#"&&r!==""?(ys.openLink(r,"_blank"),!1):n==undefined||$.trim(n).length==0?!1:($(".menuTab").each(function(){if($(this).data("id")==n)return $(this).hasClass("active")||($(this).addClass("active").siblings(".menuTab").removeClass("active"),t(this),$(".mainContent .YiSha_iframe").each(function(){if($(this).data("id")==n)return $(this).show().siblings(".YiSha_iframe").hide(),!1})),u=!1,!1}),u&&(f='<a href="javascript:;" class="active menuTab" data-id="'+n+'">'+s+' <i class="fa fa-times-circle"><\/i><\/a>',$(".menuTab").removeClass("active"),e='<iframe class="YiSha_iframe" name="iframe'+o+'" width="100%" height="100%" src="'+n+'" frameborder="0" data-id="'+n+'" seamless><\/iframe>',$(".mainContent").find("iframe.YiSha_iframe").hide().parents(".mainContent").append(e),ys.showLoading("数据加载中，请稍后..."),$(".mainContent iframe:visible").load(function(){ys.closeLoading()}),$(".menuTabs .page-tabs-content").append(f),t($(".menuTab.active"))),i($(".menuTab.active")),!1)});$(".menuTabs").on("click",".menuTab i",e);$(".tabCloseOther").on("click",function(){$(".page-tabs-content").children("[data-id]").not(":first").not(".active").each(function(){$('.YiSha_iframe[data-id="'+$(this).data("id")+'"]').remove();$(this).remove()});$(".page-tabs-content").css("margin-left","0")});$(".tabShowActive").on("click",function(){t($(".menuTab.active"))});$(".menuTabs").on("click",".menuTab",function(){if(!$(this).hasClass("active")){var n=$(this).data("id");$(".mainContent .YiSha_iframe").each(function(){if($(this).data("id")==n)return $(this).show().siblings(".YiSha_iframe").hide(),!1});$(this).addClass("active").siblings(".menuTab").removeClass("active");t(this)}i(this)});$("#fullScreen").on("click",function(){$("#wrapper").fullScreen()});$(".tabReload").on("click",r);$(".menuTabs").on("dblclick",".menuTab",r);$(".tabLeft").on("click",u);$(".tabRight").on("click",f);$(".tabCloseCurrent").on("click",function(){$(".page-tabs-content").find(".active i").trigger("click")});$(".tabCloseAll").on("click",function(){$(".page-tabs-content").children("[data-id]").not(":first").each(function(){$('.YiSha_iframe[data-id="'+$(this).data("id")+'"]').remove();$(this).remove()});$(".page-tabs-content").children("[data-id]:first").each(function(){$('.YiSha_iframe[data-id="'+$(this).data("id")+'"]').show();$(this).addClass("active")});$(".page-tabs-content").css("margin-left","0")})});